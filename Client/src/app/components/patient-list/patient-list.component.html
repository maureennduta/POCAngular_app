<div class="container">
  <div class="row">
    <div class="col-lg-2"></div>
    <div class="col-lg-8">
      <div class="input-group mb-4">
        <input
          type="text"
          #name
          class="form-control"
          placeholder="Search Patient"
          (input)="fetchPatientByName(name.value)"
        />
      </div>
    </div>
    <div class="col-lg-2"></div>
  </div>

  <div class="row">
    <div class="col-lg-2"></div>
    <div class="col-lg-8">
      <table
        datatable="ng"
        [dtOptions]="dtOptions"
        [dtTrigger]="dtTrigger"
        class="table table-striped"
        ng-if="patients"
      >
        <thead>
          <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>DOB</th>
            <th>Phone number</th>
            <th>Hiv Status</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody *ngIf="patients?.length != 0">
          <tr *ngFor="let patient of patients">
            <td>{{ patient.name }}</td>
            <td>{{ patient.age }}</td>
            <td>{{ patient.gender }}</td>
            <td>{{ patient.Birth_Date }}</td>
            <td>{{ patient.phone_number }}</td>
            <td>{{ patient.hiv_status }}</td>
            <td>
              <button
                class="btn btn-default"
                (click)="selectPatient(patient, content)"
              >
                Show details
              </button>
            </td>
          </tr>
        </tbody>

        <tbody *ngIf="patients?.length === 0">
          <tr>
            <td colspan="7" class="no-data-available">No data!</td>
          </tr>
        </tbody>
      </table>

      <!-- patient details modal -->

      <ng-template #content let-modal>
        <div class="modal-header">
          <h4 class="modal-title">Patient Details</h4>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="modal.dismiss('Cross click')"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="" *ngIf="selectedPatient">
            <form>
              <div class="form-group row">
                <label for="name" class="col-lg-2 col-form-label">Name:</label>
                <div class="col-lg-10">
                  <input
                    type="text"
                    readonly
                    class="form-control mb-4"
                    id="name"
                    value="{{ selectedPatient.name }}"
                  />
                </div>
              </div>

              <div class="form-group row">
                <label for="age" class="col-lg-2 col-form-label">Age:</label>
                <div class="col-lg-10">
                  <input
                    type="text"
                    readonly
                    class="form-control mb-4"
                    id="age"
                    value="{{ selectedPatient.age }}"
                  />
                </div>
              </div>

              <div class="form-group row">
                <label for="gender" class="col-lg-2 col-form-label"
                  >Gender:</label
                >
                <div class="col-lg-10">
                  <input
                    type="text"
                    readonly
                    class="form-control mb-4"
                    id="gender"
                    value="{{ selectedPatient.gender }}"
                  />
                </div>
              </div>

              <div class="form-group row">
                <label for="dob" class="col-lg-2 col-form-label">D.O.B:</label>
                <div class="col-lg-10">
                  <input
                    type="text"
                    readonly
                    class="form-control mb-4"
                    id="dob"
                    value="{{ selectedPatient.Birth_Date }}"
                  />
                </div>
              </div>

              <div class="form-group row">
                <label for="contacts" class="col-lg-2 col-form-label"
                  >Contacts:</label
                >
                <div class="col-lg-10">
                  <input
                    type="text"
                    readonly
                    class="form-control mb-4"
                    id="contacts"
                    value="{{ selectedPatient.phone_number }}"
                  />
                </div>
              </div>

              <div class="form-group row">
                <label for="contacts" class="col-lg-2 col-form-label"
                  >Hiv Status:</label
                >
                <div class="col-lg-10">
                  <input
                    type="text"
                    readonly
                    class="form-control mb-4"
                    id="contacts"
                    value="{{ selectedPatient.hiv_status }}"
                  />
                </div>
              </div>
            </form>
            <!-- <label>Name:</label><h5>{{ selectedPatient.name }}</h5>
            <h5>{{ selectedPatient.name }}</h5>
            <p>Age:   {{ selectedPatient.age }}</p>
            <p>Gender: {{ selectedPatient.gender }}</p>
            <span>D.O.B: {{selectedPatient.dob}} </span><br>
            <span>Contacts: {{selectedPatient.phone_number}}</span> -->

            <!-- <input class="form-control" value="{{ selectedPatient.name }}" /> -->
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-light"
            (click)="modal.close('Close click')"
          >
            Close
          </button>
        </div>
      </ng-template>
    </div>
    <div class="col-lg-2"></div>
  </div>
</div>
